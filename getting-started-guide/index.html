<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Getting Started Guide | My New Hugo Site</title><meta name=keywords content><meta name=description content="This is where the web platform will live! Creating the env conda create -n venv_tess python=3.8 conda activate venv_tess pip install -r requirements.txt Ensure you install mysql - first time only! brew install mysql brew services start mysql mysqladmin -u root password 'password' brew services stop mysql Checking out the DB brew services start mysql # I use TablePlus, so at this point, launch tableplus and add in the parameters you created above # namely, localhost, username = root and password."><meta name=author content="Me"><link rel=canonical href=http://example.org/getting-started-guide/><meta name=google-site-verification content="XYZabc"><link href=/assets/css/stylesheet.min.1eef9c740af75b4e5f773d9d5f757e03e3df71f3a308e73070cc73d55a59a7d7.css integrity="sha256-Hu+cdAr3W05fdz2dX3V+A+PfcfOjCOcwcMxz1VpZp9c=" rel="preload stylesheet" as=style><link rel=icon href=http://example.org/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://example.org/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://example.org/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://example.org/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://example.org/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.81.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-123-45','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script><meta property="og:title" content="Getting Started Guide"><meta property="og:description" content="This is where the web platform will live! Creating the env conda create -n venv_tess python=3.8 conda activate venv_tess pip install -r requirements.txt Ensure you install mysql - first time only! brew install mysql brew services start mysql mysqladmin -u root password 'password' brew services stop mysql Checking out the DB brew services start mysql # I use TablePlus, so at this point, launch tableplus and add in the parameters you created above # namely, localhost, username = root and password."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/getting-started-guide/"><meta property="og:image" content="http://example.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:published_time" content="2021-03-05T17:12:57-08:00"><meta property="article:modified_time" content="2021-03-05T17:12:57-08:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://example.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Getting Started Guide"><meta name=twitter:description content="This is where the web platform will live! Creating the env conda create -n venv_tess python=3.8 conda activate venv_tess pip install -r requirements.txt Ensure you install mysql - first time only! brew install mysql brew services start mysql mysqladmin -u root password 'password' brew services stop mysql Checking out the DB brew services start mysql # I use TablePlus, so at this point, launch tableplus and add in the parameters you created above # namely, localhost, username = root and password."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Getting Started Guide","item":"http://example.org/getting-started-guide/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Getting Started Guide","name":"Getting Started Guide","description":"This is where the web platform will live! Creating the env conda create -n venv_tess python=3.8 conda activate venv_tess pip install -r requirements.txt Ensure you install mysql - â€¦","keywords":[],"articleBody":"This is where the web platform will live! Creating the env conda create -n venv_tess python=3.8 conda activate venv_tess pip install -r requirements.txt Ensure you install mysql - first time only! brew install mysql brew services start mysql mysqladmin -u root password 'password' brew services stop mysql Checking out the DB brew services start mysql # I use TablePlus, so at this point, launch tableplus and add in the parameters you created above # namely, localhost, username = root and password. You can leave the DB name blank for now # Alternatively, you can use the command line mysql -u root -p 'your root password' # Then, create the tess_user, something like: # ðŸ‘‡ this user and password is for the development config # CREATE USER 'tess_user'@'localhost' IDENTIFIED BY 'tess_db_password_local'; # FLUSH PRIVILEGES; # Make sure to grant the appropriate perms for this user. # You can follow instructions here if you're unsure: https://tableplus.com/blog/2019/08/how-to-manage-user-mysql-tableplus-gui.html # Lastly, create the DB - name it tess Almost thereâ€¦ # set the flask environmental variable export FLASK_APP=web # the TESS DB now exists but its schema is still in the ether. # to ensure that our python models are reflected as tables, run flask db upgrade # you only need to do this when first creating the DB or whenever # there are new models or changes to existing models!! Our frontend is currently leveraging react and mdc to generate the whole experience Everything gets bundled via webpack, however, for sake of speed (since I donâ€™t want to deal with routing on the web client) this is not a SPA, so we need to manually register every file to bundle in the webpack config. Anywaysâ€¦\n# make sure you have node/nvm installed nvm use # this will ensure that the node verison is loaded to the pegged version in the .nvmrc # make sure you have yarn installed, https://classic.yarnpkg.com/en/ yarn install # install all the dependencies in the package.json yarn build # bundle and deploy all the assets referenced in the application Starting the Redis Server redis-server Running the project flask run â€¦ navigate to localhost:5000\nSimulating a more production style application run: # green unicorn is in the requirements.txt, so it should be installed already # if not, pip install gunicorn gunicorn web:app  Starting gunicorn 20.0.4  Listening at: http://127.0.0.1:8000 (30581)  Using worker: sync  Booting worker with pid: 30583 # navigate to locahost:8000 and everything should work as normal  Some things worth noting and some resources\n Our frontend is leveraging the React Wrapper for the Material Design Components (MDC) from Google: https://rmwc.io/ and https://material.io/develop/web/   Setting up the AMI and getting the application running in EC2 These are the steps I took\nsudo yum install python36 python36-pip sudo yum install git -y git clone https://github.com/slacgismo/TESS.git sudo yum install python36-devel # sudo yum install python36-setuptools # curl -O https://bootstrap.pypa.io/get-pip.py python3 get-pip.py python3 -m pip install Flask python3 -m pip install -r requirements.txt curl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo curl -sL https://rpm.nodesource.com/setup_12.x | sudo bash - sudo yum install -y nodejs sudo yum install yarn yarn install yarn build sudo yum install epel-release sudo yum install nginx sudo service nginx start python3 -m pip install supervisor supervisord cd /etc/nginx sudo mkdir sites-available sudo mkdir sites-enabled cd sites-available/ sudo touch tess sudo nginx -t sudo service nginx restart # exported vars export FLASK_ENV=\"production\" export FLASK_DEBUG=\"0\" export DB_PASSWORD=\"add-the-actual-password-here!!!this is not it\" export DB_SERVER=\"tess-dev.cudndiboutru.us-west-1.rds.amazonaws.com\" export DB_USER=\"admin\" # restart the process supervisorctl restart tess # TROUBLESHOOTING # did you pip install new dependencies? # did you yarn install new dependencies? # did you check the logs in /tmp/tess*? To update the code with the latest changes:\n SSH into the above machine git pull â€“rebase the latest from master install the new python/js dependencies if needed run the new migrations if needed supervisorctl restart tess  ","wordCount":"639","inLanguage":"en","datePublished":"2021-03-05T17:12:57-08:00","dateModified":"2021-03-05T17:12:57-08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://example.org/getting-started-guide/"},"publisher":{"@type":"Organization","name":"My New Hugo Site","logo":{"@type":"ImageObject","url":"http://example.org/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=http://example.org/ accesskey=h title="GRIP (Alt + H)">GRIP</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=http://example.org/getting-started-guide/ title="Getting Started Guide"><span class=active>Getting Started Guide</span></a></li><li><a href=http://example.org/contact/ title=Contact><span>Contact</span></a></li><li><a href=http://example.org/literature/ title=Literature><span>Literature</span></a></li><li><a href=http://example.org/use-cases/ title="Use Cases"><span>Use Cases</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Getting Started Guide</h1><div class=post-meta>March 5, 2021&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Me</div></header><div class=post-content><h1 id=this-is-where-the-web-platform-will-live>This is where the web platform will live!<a hidden class=anchor aria-hidden=true href=#this-is-where-the-web-platform-will-live>#</a></h1><h2 id=creating-the-env>Creating the env<a hidden class=anchor aria-hidden=true href=#creating-the-env>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>conda create -n venv_tess python<span style=color:#f92672>=</span>3.8
conda activate venv_tess
pip install -r requirements.txt
</code></pre></div><h2 id=ensure-you-install-mysql---first-time-only>Ensure you install mysql - first time only!<a hidden class=anchor aria-hidden=true href=#ensure-you-install-mysql---first-time-only>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew install mysql
brew services start mysql
mysqladmin -u root password <span style=color:#e6db74>&#39;password&#39;</span>
brew services stop mysql
</code></pre></div><h2 id=checking-out-the-db>Checking out the DB<a hidden class=anchor aria-hidden=true href=#checking-out-the-db>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew services start mysql
<span style=color:#75715e># I use TablePlus, so at this point, launch tableplus and add in the parameters you created above</span>
<span style=color:#75715e># namely, localhost, username = root and password. You can leave the DB name blank for now</span>

<span style=color:#75715e># Alternatively, you can use the command line</span>
mysql -u root -p <span style=color:#e6db74>&#39;your root password&#39;</span>

<span style=color:#75715e># Then, create the tess_user, something like:</span>
<span style=color:#75715e># ðŸ‘‡ this user and password is for the development config</span>
<span style=color:#75715e># CREATE USER &#39;tess_user&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;tess_db_password_local&#39;;</span>
<span style=color:#75715e># FLUSH PRIVILEGES;</span>
<span style=color:#75715e># Make sure to grant the appropriate perms for this user.</span>
<span style=color:#75715e># You can follow instructions here if you&#39;re unsure: https://tableplus.com/blog/2019/08/how-to-manage-user-mysql-tableplus-gui.html</span>

<span style=color:#75715e># Lastly, create the DB - name it tess</span>
</code></pre></div><h2 id=almost-there>Almost there&mldr;<a hidden class=anchor aria-hidden=true href=#almost-there>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># set the flask environmental variable</span>
export FLASK_APP<span style=color:#f92672>=</span>web

<span style=color:#75715e># the TESS DB now exists but its schema is still in the ether.</span>
<span style=color:#75715e># to ensure that our python models are reflected as tables, run</span>
flask db upgrade  

<span style=color:#75715e># you only need to do this when first creating the DB or whenever</span>
<span style=color:#75715e># there are new models or changes to existing models!!</span>
</code></pre></div><h2 id=our-frontend-is-currently-leveraging-react-and-mdc-to-generate-the-whole-experience>Our frontend is currently leveraging react and mdc to generate the whole experience<a hidden class=anchor aria-hidden=true href=#our-frontend-is-currently-leveraging-react-and-mdc-to-generate-the-whole-experience>#</a></h2><p>Everything gets bundled via webpack, however, for sake of speed (since I don&rsquo;t want to deal with routing on the web client) this is not a SPA, so we need to manually register every file to bundle in the webpack config. Anyways&mldr;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># make sure you have node/nvm installed</span>
nvm use  <span style=color:#75715e># this will ensure that the node verison is loaded to the pegged version in the .nvmrc</span>
<span style=color:#75715e># make sure you have yarn installed, https://classic.yarnpkg.com/en/</span>
yarn install <span style=color:#75715e># install all the dependencies in the package.json</span>
yarn build   <span style=color:#75715e># bundle and deploy all the assets referenced in the application</span>
</code></pre></div><h2 id=starting-the-redis-server>Starting the Redis Server<a hidden class=anchor aria-hidden=true href=#starting-the-redis-server>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>redis-server
</code></pre></div><h2 id=running-the-project>Running the project<a hidden class=anchor aria-hidden=true href=#running-the-project>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>flask run
</code></pre></div><p>&mldr; navigate to <code>localhost:5000</code></p><h2 id=simulating-a-more-production-style-application-run>Simulating a more production style application run:<a hidden class=anchor aria-hidden=true href=#simulating-a-more-production-style-application-run>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># green unicorn is in the requirements.txt, so it should be installed already</span>
<span style=color:#75715e># if not, pip install gunicorn</span>
gunicorn web:app
&gt; Starting gunicorn 20.0.4
&gt; Listening at: http://127.0.0.1:8000 <span style=color:#f92672>(</span>30581<span style=color:#f92672>)</span>
&gt; Using worker: sync
&gt; Booting worker with pid: <span style=color:#ae81ff>30583</span>
<span style=color:#75715e># navigate to locahost:8000 and everything should work as normal</span>
</code></pre></div><hr><p>Some things worth noting and some resources</p><ul><li>Our frontend is leveraging the React Wrapper for the Material Design Components (MDC) from Google: <a href=https://rmwc.io/>https://rmwc.io/</a> and <a href=https://material.io/develop/web/>https://material.io/develop/web/</a></li></ul><hr><h2 id=setting-up-the-ami-and-getting-the-application-running-in-ec2>Setting up the AMI and getting the application running in EC2<a hidden class=anchor aria-hidden=true href=#setting-up-the-ami-and-getting-the-application-running-in-ec2>#</a></h2><p>These are the steps I took</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo yum install python36 python36-pip
sudo yum install git -y
git clone https://github.com/slacgismo/TESS.git
sudo yum install python36-devel

<span style=color:#75715e># sudo yum install python36-setuptools</span>
<span style=color:#75715e># curl -O https://bootstrap.pypa.io/get-pip.py</span>

python3 get-pip.py
python3 -m pip install Flask
python3 -m pip install -r requirements.txt
curl --silent --location https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo
curl -sL https://rpm.nodesource.com/setup_12.x | sudo bash -
sudo yum install -y nodejs
sudo yum install yarn
yarn install
yarn build
sudo yum install epel-release
sudo yum install nginx
sudo service nginx start
python3 -m pip install supervisor
supervisord
cd /etc/nginx
sudo mkdir sites-available
sudo mkdir sites-enabled
cd sites-available/
sudo touch tess
sudo nginx -t
sudo service nginx restart

<span style=color:#75715e># exported vars</span>
export FLASK_ENV<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;production&#34;</span>
export FLASK_DEBUG<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0&#34;</span>
export DB_PASSWORD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;add-the-actual-password-here!!!this is not it&#34;</span>
export DB_SERVER<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tess-dev.cudndiboutru.us-west-1.rds.amazonaws.com&#34;</span>
export DB_USER<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;admin&#34;</span>

<span style=color:#75715e># restart the process</span>
supervisorctl restart tess

<span style=color:#75715e># TROUBLESHOOTING</span>
<span style=color:#75715e># did you pip install new dependencies?</span>
<span style=color:#75715e># did you yarn install new dependencies?</span>
<span style=color:#75715e># did you check the logs in /tmp/tess*?</span>
</code></pre></div><p>To update the code with the latest changes:</p><ul><li>SSH into the above machine</li><li>git pull &ndash;rebase the latest from master</li><li>install the new python/js dependencies if needed</li><li>run the new migrations if needed</li><li>supervisorctl restart tess</li></ul></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2021 <a href=http://example.org/>My New Hugo Site</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>